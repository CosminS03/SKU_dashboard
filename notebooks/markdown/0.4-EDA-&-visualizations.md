```python
import pandas as pd

df = pd.read_csv("../data/interim/online_retail_no_outliers.csv", dtype = {"InvoiceNo": str})
```


```python
df["InvoiceDate"] = pd.to_datetime(df["InvoiceDate"]) 
```


```python
ros = df[~df["InvoiceNo"].str.startswith('C')].groupby(by = "SKU")["Quantity"].sum().reset_index()

first_day = df["InvoiceDate"].min()
last_day = df["InvoiceDate"].max()

date_span = last_day - first_day

no_weeks = date_span.days / 7

ros["Rate_of_sale"] = round((ros["Quantity"] / no_weeks), 2)
```


```python
ros.sort_values(by="Rate_of_sale", ascending=False).head(10)
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>SKU</th>
      <th>Quantity</th>
      <th>Rate_of_sale</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>324</th>
      <td>21498</td>
      <td>7476</td>
      <td>140.30</td>
    </tr>
    <tr>
      <th>761</th>
      <td>22952</td>
      <td>6803</td>
      <td>127.67</td>
    </tr>
    <tr>
      <th>230</th>
      <td>21213</td>
      <td>6350</td>
      <td>119.17</td>
    </tr>
    <tr>
      <th>471</th>
      <td>21975</td>
      <td>6244</td>
      <td>117.18</td>
    </tr>
    <tr>
      <th>831</th>
      <td>23231</td>
      <td>6152</td>
      <td>115.45</td>
    </tr>
    <tr>
      <th>323</th>
      <td>21497</td>
      <td>5450</td>
      <td>102.28</td>
    </tr>
    <tr>
      <th>475</th>
      <td>21985</td>
      <td>5229</td>
      <td>98.13</td>
    </tr>
    <tr>
      <th>830</th>
      <td>23230</td>
      <td>5201</td>
      <td>97.61</td>
    </tr>
    <tr>
      <th>325</th>
      <td>21499</td>
      <td>5002</td>
      <td>93.87</td>
    </tr>
    <tr>
      <th>326</th>
      <td>21500</td>
      <td>4925</td>
      <td>92.43</td>
    </tr>
  </tbody>
</table>
</div>




```python
df[df["SKU"].isin(ros[ros["Rate_of_sale"] == ros["Rate_of_sale"].max()]["SKU"])].head()
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>InvoiceNo</th>
      <th>SKU</th>
      <th>Description</th>
      <th>Quantity</th>
      <th>InvoiceDate</th>
      <th>UnitPrice</th>
      <th>CustomerID</th>
      <th>Country</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>219</th>
      <td>536531</td>
      <td>21498</td>
      <td>RED RETROSPOT WRAP</td>
      <td>25</td>
      <td>2010-12-01 13:23:00</td>
      <td>0.42</td>
      <td>15485.0</td>
      <td>United Kingdom</td>
    </tr>
    <tr>
      <th>221</th>
      <td>536531</td>
      <td>21498</td>
      <td>RED RETROSPOT WRAP</td>
      <td>25</td>
      <td>2010-12-01 13:23:00</td>
      <td>0.42</td>
      <td>15485.0</td>
      <td>United Kingdom</td>
    </tr>
    <tr>
      <th>1257</th>
      <td>536984</td>
      <td>21498</td>
      <td>RED RETROSPOT WRAP</td>
      <td>25</td>
      <td>2010-12-03 14:35:00</td>
      <td>0.42</td>
      <td>17841.0</td>
      <td>United Kingdom</td>
    </tr>
    <tr>
      <th>3138</th>
      <td>537672</td>
      <td>21498</td>
      <td>RED RETROSPOT WRAP</td>
      <td>25</td>
      <td>2010-12-08 09:30:00</td>
      <td>0.42</td>
      <td>13050.0</td>
      <td>United Kingdom</td>
    </tr>
    <tr>
      <th>3257</th>
      <td>537775</td>
      <td>21498</td>
      <td>RED RETROSPOT WRAP</td>
      <td>25</td>
      <td>2010-12-08 12:41:00</td>
      <td>0.42</td>
      <td>17722.0</td>
      <td>United Kingdom</td>
    </tr>
  </tbody>
</table>
</div>




```python
from src import plots

plots.kpi_distribution(ros["Rate_of_sale"], "Rate of Sale")
```


    
![png](0.4-EDA-%26-visualizations_files/0.4-EDA-%26-visualizations_5_0.png)
    

