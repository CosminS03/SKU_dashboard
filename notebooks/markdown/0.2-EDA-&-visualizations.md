```python
import pandas as pd

df = pd.read_csv("../data/interim/online_retail_transformed.csv")
```


```python
df["Revenue"] = round(df["Quantity"] * df["UnitPrice"], 2)
```


```python
sku_agg = df[~df["InvoiceNo"].str.startswith('C')].groupby(by=['SKU', 'Description'])["Revenue"].sum().reset_index()
```


```python
sku_agg['Revenue contribution'] = round(sku_agg["Revenue"] / sku_agg["Revenue"].sum() * 100, 3)
```


```python
sku_agg = sku_agg.sort_values(by='Revenue contribution', ascending=False)
```


```python
sku_agg.tail(10)
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>SKU</th>
      <th>Description</th>
      <th>Revenue</th>
      <th>Revenue contribution</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2188</th>
      <td>23282</td>
      <td>FOLDING MIRROR IVORY</td>
      <td>14.94</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>2729</th>
      <td>77079</td>
      <td>DOLPHIN WINDMILL</td>
      <td>2.12</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>2724</th>
      <td>72821</td>
      <td>CUPID SCENTED CANDLE IN GLASS</td>
      <td>18.15</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>3028</th>
      <td>90094</td>
      <td>NECKLACE+BRACELET SET FRUIT SALAD</td>
      <td>35.70</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>3027</th>
      <td>90093</td>
      <td>CLEAR CRYSTAL STAR PHONE CHARM</td>
      <td>28.57</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>3026</th>
      <td>90092</td>
      <td>BLUE CRYSTAL BOOT PHONE CHARM</td>
      <td>1.66</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>3025</th>
      <td>90089</td>
      <td>PINK CRYSTAL SKULL PHONE CHARM</td>
      <td>16.22</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>3022</th>
      <td>90085</td>
      <td>CRYSTAL STILETTO PHONE CHARM</td>
      <td>36.76</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>3021</th>
      <td>90084</td>
      <td>PINK CRYSTAL GUITAR PHONE CHARM</td>
      <td>0.85</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>3020</th>
      <td>90083</td>
      <td>CRYSTAL CZECH CROSS PHONE CHARM</td>
      <td>23.47</td>
      <td>0.0</td>
    </tr>
  </tbody>
</table>
</div>




```python
#9.67% of SKUs contribute less than 0.001% to the total revenue
len(sku_agg[sku_agg["Revenue contribution"] == 0]) / len(sku_agg) * 100
```




    9.675324675324676




```python
from src import plots
```


```python
plots.percent_of_total_plot(df, "Revenue", "Revenue")
```

    C:\Users\spanu\Desktop\SKU_dashboard\src\plots.py:46: FutureWarning: 
    
    Passing `palette` without assigning `hue` is deprecated and will be removed in v0.14.0. Assign the `x` variable to `hue` and set `legend=False` for the same effect.
    
      sns.barplot(x="SKU", y=feature, data=df, ax=ax1, palette=palette, order=sku_order)
    


    
![png](0.2-EDA-%26-visualizations_files/0.2-EDA-%26-visualizations_8_1.png)
    



```python
sku_agg.truncate()
sku_agg = df[~df["InvoiceNo"].str.startswith('C')].groupby(by= ["SKU", "Description"])["Quantity"].sum().reset_index()
```


```python
sku_agg["Sales_contribution"] = round(sku_agg["Quantity"] / sku_agg["Quantity"].sum() * 100, 3)
```


```python
sku_agg = sku_agg.sort_values(by='Sales_contribution', ascending=False)
```


```python
sku_agg.head(10)
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>SKU</th>
      <th>Description</th>
      <th>Quantity</th>
      <th>Sales_contribution</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2590</th>
      <td>23843</td>
      <td>PAPER CRAFT , LITTLE BIRDIE</td>
      <td>80995</td>
      <td>1.579</td>
    </tr>
    <tr>
      <th>2045</th>
      <td>23166</td>
      <td>MEDIUM CERAMIC TOP STORAGE JAR</td>
      <td>78033</td>
      <td>1.521</td>
    </tr>
    <tr>
      <th>2769</th>
      <td>84077</td>
      <td>WORLD WAR 2 GLIDERS ASSTD DESIGNS</td>
      <td>55047</td>
      <td>1.073</td>
    </tr>
    <tr>
      <th>1051</th>
      <td>22197</td>
      <td>POPCORN HOLDER</td>
      <td>36761</td>
      <td>0.716</td>
    </tr>
    <tr>
      <th>2875</th>
      <td>84879</td>
      <td>ASSORTED COLOUR BIRD ORNAMENT</td>
      <td>36461</td>
      <td>0.711</td>
    </tr>
    <tr>
      <th>370</th>
      <td>21212</td>
      <td>PACK OF 72 RETROSPOT CAKE CASES</td>
      <td>36419</td>
      <td>0.710</td>
    </tr>
    <tr>
      <th>1951</th>
      <td>23084</td>
      <td>RABBIT NIGHT LIGHT</td>
      <td>30788</td>
      <td>0.600</td>
    </tr>
    <tr>
      <th>1327</th>
      <td>22492</td>
      <td>MINI PAINT SET VINTAGE</td>
      <td>26633</td>
      <td>0.519</td>
    </tr>
    <tr>
      <th>1450</th>
      <td>22616</td>
      <td>PACK OF 12 LONDON TISSUES</td>
      <td>26135</td>
      <td>0.509</td>
    </tr>
    <tr>
      <th>868</th>
      <td>21977</td>
      <td>PACK OF 60 PINK PAISLEY CAKE CASES</td>
      <td>24854</td>
      <td>0.484</td>
    </tr>
  </tbody>
</table>
</div>




```python
#11.68% of SKUs contribute less than 0.001% to the total sales
len(sku_agg[sku_agg["Sales_contribution"] == 0]) / len(sku_agg) * 100
```




    11.688311688311687




```python
plots.percent_of_total_plot(df, "Quantity", "Sales")
```

    C:\Users\spanu\Desktop\SKU_dashboard\src\plots.py:46: FutureWarning: 
    
    Passing `palette` without assigning `hue` is deprecated and will be removed in v0.14.0. Assign the `x` variable to `hue` and set `legend=False` for the same effect.
    
      sns.barplot(x="SKU", y=feature, data=df, ax=ax1, palette=palette, order=sku_order)
    


    
![png](0.2-EDA-%26-visualizations_files/0.2-EDA-%26-visualizations_14_1.png)
    

